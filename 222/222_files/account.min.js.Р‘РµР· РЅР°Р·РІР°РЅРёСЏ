String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(t,r){return r=!r||r<0?0:+r,this.substring(r,r+t.length)===t}});
(function(){var h,t,l,o,r={}.hasOwnProperty;function e(){this.options_index=0,this.parsed=[]}function s(t,e){this.form_field=t,this.options=null!=e?e:{},this.is_top_style(),s.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}function i(){return i.__super__.constructor.apply(this,arguments)}e.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},e.prototype.add_group=function(t){var e,s,i,l,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=[],i=0,l=(r=t.childNodes).length;i<l;i++)s=r[i],o.push(this.add_option(s,e,t.disabled));return o},e.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected||h(t).hasClass("selected"),disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(t){var e,s;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},(o=e).select_to_array=function(t){var e,s,i,l,r;for(s=new o,i=0,l=(r=t.childNodes).length;i<l;i++)e=r[i],s.add_node(e);return s.parsed},s.prototype.is_top_style=function(){var t=this.form_field.getAttribute("data-top");t&&(this.options.top=t)},s.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.should_close_results=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.farfetch_mode=null!=this.options.farfetch_mode&&this.options.farfetch_mode,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},s.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||s.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||s.default_single_text,this.clear_text=this.form_field.getAttribute("data-clear_text")||this.options.clear_text||s.default_clear_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||s.default_no_result_text},s.prototype.mouse_enter=function(){return this.mouse_on_container=!0},s.prototype.mouse_leave=function(){return this.mouse_on_container=!1},s.prototype.input_focus=function(t){if(this.is_multiple)this.active_field;else if(!this.active_field)return this.activate_field()},s.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},s.prototype.results_option_build=function(t){var e,s,i,l,r;for(e="",i=0,l=(r=this.results_data).length;i<l;i++)(s=r[i]).group?e+=this.result_add_group(s):e+=this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s));return e},s.prototype.result_add_option=function(t){var e,s;if(!t.search_match)return"";if(!this.include_option_in_results(t))return"";if(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),FFAPI.methods.hasClass(this.form_field,"changeSizeSelect")){splitted=t.search_text.split(" ");var i="";if(1==splitted.length||2==splitted.length)i=splitted[0];else for(var l=0;l<splitted.length-1;l++)i+=splitted[l]+" ";if(1<splitted.length)var r=splitted[splitted.length-1];else r="";t.search_text="<span class='bold'>"+i+" </span> "+r}return s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li class="'+e.join(" ")+'"'+s+' data-option-array-index="'+t.array_index+'" value='+t.value+"><i></i>"+t.search_text+"</li>"},s.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&0<t.active_options?'<li class="group-result">'+t.search_text+"</li>":""},s.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},s.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},s.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},s.prototype.winnow_results=function(){var t,e,s,i,l,r,o,n,h,a,c,_,d;for(this.no_results_clear(),l=0,t=(o=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),a=new RegExp(t,"i"),c=0,_=(d=this.results_data).length;c<_;c++)(e=d[c]).search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(r=this.results_data[e.group_array_index]).active_options&&r.search_match&&(l+=1),r.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(l+=1),e.search_match?(o.length&&(n=e.search_text.search(a),h=e.search_text.substr(0,n+o.length)+"</em>"+e.search_text.substr(n+o.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),l<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},s.prototype.search_string_match=function(t,e){var s,i,l,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(0<=t.indexOf(" ")||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" ")).length)for(l=0,r=i.length;l<r;l++)if(s=i[l],e.test(s))return!0},s.prototype.choices_count=function(){var t,e,s;if(null!=this.selected_option_count)return this.selected_option_count;for(t=this.selected_option_count=0,e=(s=this.form_field.options).length;t<e;t++)s[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},s.prototype.choices_click=function(t){if(t.preventDefault(),!t||!h(t.target).hasClass("chosen-clear-field_link"))return this.results_showing||this.is_disabled?void(this.farfetch_mode&&this.should_close_results&&(this.should_close_results=!1,this.results_hide())):this.results_show();this.container.find(".search-choice-close").trigger("click.chosen")},s.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&0<this.choices_count())return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},s.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},s.prototype.include_option_in_results=function(t){return!(""===t.value||this.is_multiple&&!this.display_selected_options&&t.selected||!this.display_disabled_options&&t.disabled||t.empty)},s.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent))},s.default_multiple_text="Select Some Options",s.default_single_text="Select an Option",s.default_no_result_text="No results match",s.default_clear_text="Clear",t=s,(h=jQuery).fn.extend({chosen:function(i){return t.browser_is_supported()?this.each(function(t){var e,s;s=(e=h(this)).data("chosen"),"destroy"===i&&s?s.destroy():s||e.data("chosen",new l(this,i))}):this}}),function(t,e){for(var s in e)r.call(e,s)&&(t[s]=e[s]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.prototype.setup=function(){return this.form_field_jq=h(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,e;if((t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),e={class:t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(e.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=h("<div />",e),this.is_multiple){var s='<ul class="chosen-choices"><li class="search-field"></li><li><a class="chosen-default" tabindex="-1"><span class="multiselect-itemscheckbox">'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a></li>';this.farfetch_mode&&(s+='<li class="chosen-clear-field" style="display: none;"><a href="#" class="chosen-clear-field_link">'+this.clear_text+"</a></li>"),s+='</ul><div class="chosen-drop"><div class="search-field"><div class="input-icon input-icon-white input-icon-offset"><input type="text" value="'+this.default_text+'" class="input_black" autocomplete="off" style="width:25px;" /><span class="glyphs h3 icon-search input-icon-left"></span></div></div><ul class="chosen-results"></ul></div>',this.container.html(s)}else"true"==this.options.top?this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a><div class="chosen-drop chosen-top"><ul class="chosen-results"></ul><div class="chosen-search"><div class="input-icon input-icon-white input-icon-offset"><input type="text" autocomplete="off" class="input_black"/><span class="glyphs h3 icon-search input-icon-left"></span></div></div></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div class="chosen-drop-icon-wrapper"><b class="chosen-drop-icon"></b></div></a><div class="chosen-drop"><div class="chosen-search"><div class="input-icon input-icon-white input-icon-offset"><input type="text" autocomplete="off" class="input_black"/><span class="glyphs h3 icon-search input-icon-left"></span></div></div><ul class="chosen-results"></ul></div>');return this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return h(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){if(!this.is_disabled){if(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&this.farfetch_mode&&h(t.target).hasClass("result-selected")){var e=h(t.target).attr("data-option-array-index");this.container.find(".search-choice-close[data-option-array-index="+e+"]").trigger("click.chosen"),this.results_hide()}if(null==t||!h(t.target).hasClass("search-choice-close")){if(this.active_field?this.results_showing&&this.farfetch_mode?this.should_close_results=!0:this.is_multiple||!t||h(t.target)[0]!==this.selected_item[0]&&!h(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),h(document).bind("click.chosen",this.click_test_action),this.results_show()),h(t.target).parents(".chosen-single").length&&"checkoutBasket"==h("body").data("page")&&this.container[0].id){var s=this.container[0].id;h("#"+s+" .chosen-drop .chosen-results").scrollTop(0)}return this.activate_field()}}},i.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e,s,i;if(null!=(e=-(null!=(s=t.originalEvent)?s.wheelDelta:void 0)||(null!=(i=t.originialEvent)?i.detail:void 0)))return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},i.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return h(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){return this.container.is(h(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=o.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,s,i,l;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),(i=parseInt(this.search_results.css("maxHeight"),10))+(l=this.search_results.scrollTop())<=(e=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight()))return this.search_results.scrollTop(0<e-i?e-i:0);if(s<l)return this.search_results.scrollTop(s)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),"true"==this.options.top&&this.container.addClass("chosen-with-drop-top"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),"true"==this.options.top&&this.container.removeClass("chosen-with-drop-top"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=h("label[for='"+this.form_field.id+"']")),0<this.form_field_label.length)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var e;if((e=h(t.target).hasClass("active-result")?h(t.target):h(t.target).parents(".active-result").first()).length)return this.result_highlight=e,this.result_select(t),this.search_field.focus()},i.prototype.search_results_mouseover=function(t){var e;if(e=h(t.target).hasClass("active-result")?h(t.target):h(t.target).parents(".active-result").first())return this.result_do_highlight(e)},i.prototype.search_results_mouseout=function(t){if(h(t.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(t){var e,s,i=this;return e=h("<li />",{class:"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?e.addClass("search-choice-disabled"):((s=h("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).bind("click.chosen",function(t){return i.choice_destroy_link_click(t)}),e.append(s)),this.container.find("li.chosen-clear-field").show(),this.search_container.before(e)},i.prototype.choice_destroy_link_click=function(t){var e;return t.preventDefault(),t.stopPropagation(),this.is_disabled||(e=this.choice_destroy(h(t.target))),0==this.container.find("li.search-choice").length&&this.container.find("li.chosen-clear-field").hide(),e},i.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,s,i;if(this.result_highlight){if(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1;if(this.is_multiple?e.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),i=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[i].selected=!1),this.result_single_selected=e),e.addClass("result-selected"),(s=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value});var l=h(this.form_field_jq.closest("form"));if(l){var r=l.validate();if(null!=r){r.element(this.form_field);var o=this.form_field.getAttribute("data-dropdownValidate");if(null!=o){var n=document.getElementById(o);null!=n&&r.element(n)}}}}return this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()}this.results_hide()},i.prototype.single_set_selected_text=function(t){var e=this.default_text,s=this.selected_item;return t&&(e=t.text),null==e&&(e=this.default_text),e===this.default_text?s.addClass("chosen-default"):(this.single_deselect_control_build(),s.removeClass("chosen-default")),s.find("span").removeClass(),t&&t.classes&&s.find("span").addClass(t.classes),FFAPI.methods.hasClass(this.form_field,"changeSizeSelect")&&""==this.form_field.value&&(e=this.default_text),s.find("span").html(e)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":h("<div/>").text(h.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;if(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first(),"true"==this.options.top&&h(".chosen-top",this.container).css("top",-h(".chosen-drop",this.container).outerHeight(!0)),null!=t)return this.result_do_highlight(t)},i.prototype.no_results=function(t){var e;return(e=h('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(e),"true"==this.options.top&&h(".chosen-top",this.container).css("top",-h(".chosen-drop",this.container).outerHeight(!0)),this.search_results},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(0<this.choices_count()&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,e,s,i,l,r,o,n;if(this.is_multiple){for(i="position:absolute; left: -1000px; top: -1000px; display:none;",o=r=0,n=(l=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;o<n;o++)i+=(s=l[o])+":"+this.search_field.css(s)+";";return(t=h("<div />",{style:i})).text(this.search_field.val()),h("body").append(t),r=t.width()+25,t.remove(),(e=this.container.outerWidth())-10<r&&(r=e-10),this.search_field.css({width:r+"px"})}},l=i}).call(this);
var FFAPI=FFAPI||{};FFAPI.variables=FFAPI.variables||{},FFAPI.variables.features=FFAPI.variables.features||{},function(a){"use strict";a.store=a.store||{},a.isActive=function(e){return!!a.store[e]},a.setState=function(e,t){a.store[e]=t};for(var e=document.querySelectorAll("[data-feature]"),t=0;t<e.length;++t){var r=e[t].dataset.feature;a.setState(r,!0)}}(FFAPI.variables.features);
var sliceLoader=function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}return o.m=n,o.c=r,o.p="",o(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAsync=t.loadSlice=t.loadDep=t.pushDependencies=void 0;var r,o=n(1),s=(r=o)&&r.__esModule?r:{default:r},i=n(29);var u=t.pushDependencies=function(e,t,n){for(var r=(t=t.split(",")).length-1;0<=r;r--)n.push(a(e,t[r]))},a=t.loadDep=function(r,o){return new Promise(function(e,t){var n=void 0;"script"===r&&(n=(0,i.createJsElem)(o)),"link"===r&&(n=(0,i.createLinkElem)(o)),n.onload=function(){e()},n.onerror=function(e){t(e)},(0,i.appendTag)(n)})},c=t.loadSlice=function(e,t,n){return Promise.all(e).then(function(){window[n].renderSliceAsync(t,n)}).catch(function(e){console.error("Slice with id: "+n+" failed to load."),console.error(e.message),null!=e.srcElement&&e.srcElement.outerHTML?console.error("One of it's dependencies failed to resolve: "+e.srcElement.outerHTML):console.error("Check if your slice id matches in current app and slice")})};t.loadAsync=function(e,i){return s.default.get(e).then(function(e){if(204!==e.status){var t=[],n=e.headers,r=n["x-ff-slice-js"],o=n["x-ff-slice-css"];return o&&u("link",o,t),r&&u("script",r,t),c(t,e.data,i)}})}},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3);var i=((r=o)&&r.__esModule?r:{default:r}).default.create();i.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.interceptors.response.use(function(e){return e},function(e){return 403===e.response.status&&(window.location.href="/login.aspx"),Promise.reject(e)}),t.default=i},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";var r=n(5),o=n(6),i=n(7),s=n(8);function u(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var a=u(s);a.Axios=i,a.create=function(e){return u(r.merge(s,e))},a.Cancel=n(26),a.CancelToken=n(27),a.isCancel=n(23),a.all=function(e){return Promise.all(e)},a.spread=n(28),e.exports=a,e.exports.default=a},function(e,t,n){"use strict";var o=n(6),r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}function s(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===r.call(e)}function a(e,t){if(null!=e)if("object"==typeof e||i(e)||(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement},forEach:a,merge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]=e}for(var t=0,o=arguments.length;t<o;t++)a(arguments[t],e);return r},extend:function(n,e,r){return a(e,function(e,t){n[t]=r&&"function"==typeof e?o(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){"use strict";e.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},function(e,t,n){"use strict";var o=n(8),i=n(5),r=n(20),s=n(21),u=n(24),a=n(25);function c(e){this.defaults=e,this.interceptors={request:new r,response:new r}}c.prototype.request=function(e,t){"string"==typeof e&&(e=i.merge({url:arguments[0]},t)),(e=i.merge(o,this.defaults,{method:"get"},e)).baseURL&&!u(e.url)&&(e.url=a(e.baseURL,e.url));var n=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},i.forEach(["delete","get","head"],function(n){c.prototype[n]=function(e,t){return this.request(i.merge(t||{},{method:n,url:e}))}}),i.forEach(["post","put","patch"],function(r){c.prototype[r]=function(e,t,n){return this.request(i.merge(n||{},{method:r,url:e,data:t}))}}),e.exports=c},function(a,e,c){(function(e){"use strict";var n=c(5),r=c(10),t=/^\)\]\}',?\n/,o={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,u={adapter:("undefined"!=typeof XMLHttpRequest?s=c(11):void 0!==e&&(s=c(11)),s),transformRequest:[function(e,t){return r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(t,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(o)}),a.exports=u}).call(e,c(9))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var a,c=[],f=!1,l=-1;function p(){f&&a&&(f=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!f){var e=u(p);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var o=n(5);e.exports=function(n,r){o.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},function(e,t,p){"use strict";var d=p(5),h=p(12),m=p(15),y=p(16),v=p(17),w=p(13),g="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||p(18);e.exports=function(l){return new Promise(function(n,r){var o=l.data,i=l.headers;d.isFormData(o)&&delete i["Content-Type"];var s=new XMLHttpRequest,e="onreadystatechange",u=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||v(l.url)||(s=new window.XDomainRequest,e="onload",u=!0,s.onprogress=function(){},s.ontimeout=function(){}),l.auth){var t=l.auth.username||"",a=l.auth.password||"";i.Authorization="Basic "+g(t+":"+a)}if(s.open(l.method.toUpperCase(),m(l.url,l.params,l.paramsSerializer),!0),s.timeout=l.timeout,s[e]=function(){if(s&&(4===s.readyState||u)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in s?y(s.getAllResponseHeaders()):null,t={data:l.responseType&&"text"!==l.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:e,config:l,request:s};h(n,r,t),s=null}},s.onerror=function(){r(w("Network Error",l)),s=null},s.ontimeout=function(){r(w("timeout of "+l.timeout+"ms exceeded",l,"ECONNABORTED")),s=null},d.isStandardBrowserEnv()){var c=p(19),f=(l.withCredentials||v(l.url))&&l.xsrfCookieName?c.read(l.xsrfCookieName):void 0;f&&(i[l.xsrfHeaderName]=f)}if("setRequestHeader"in s&&d.forEach(i,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete i[t]:s.setRequestHeader(t,e)}),l.withCredentials&&(s.withCredentials=!0),l.responseType)try{s.responseType=l.responseType}catch(e){if("json"!==s.responseType)throw e}"function"==typeof l.onDownloadProgress&&s.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(e){s&&(s.abort(),r(e),s=null)}),void 0===o&&(o=null),s.send(o)})}},function(e,t,n){"use strict";var o=n(13);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(o("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";var i=n(14);e.exports=function(e,t,n,r){var o=new Error(e);return i(o,t,n,r)}},function(e,t){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";var i=n(5);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(i.isURLSearchParams(t))r=t.toString();else{var o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))}))}),r=o.join("&")}return r&&(e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,t,n){"use strict";var i=n(5);e.exports=function(e){var t,n,r,o={};return e&&i.forEach(e.split("\n"),function(e){r=e.indexOf(":"),t=i.trim(e.substr(0,r)).toLowerCase(),n=i.trim(e.substr(r+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o}},function(e,t,n){"use strict";var r,o,i,s=n(5);function u(e){var t=e;return o&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}e.exports=s.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r=u(window.location.href),function(e){var t=s.isString(e)?u(e):e;return t.protocol===r.protocol&&t.host===r.host}):function(){return!0}},function(e,t){"use strict";function u(){this.message="String contains an invalid character"}(u.prototype=new Error).code=5,u.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,r=String(e),o="",i=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.charAt(0|i)||(s="=",i%1);o+=s.charAt(63&t>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new u;t=t<<8|n}return o}},function(e,t,n){"use strict";var u=n(5);e.exports=u.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),u.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),u.isString(r)&&s.push("path="+r),u.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(5);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=o},function(e,t,n){"use strict";var r=n(5),o=n(22),i=n(23),s=n(8);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(t){return u(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return u(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(u(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(e,t,n){"use strict";var r=n(5);e.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){"use strict";var r=n(26);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},e.exports=o},function(e,t){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.appendTag=function(e){document.getElementsByTagName("head")[0].appendChild(e)},t.createJsElem=function(e){var t=document.createElement("script");return t.type="text/javascript",t.charset="utf-8",t.async=!0,t.src=e,t},t.createLinkElem=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}}]);
FFAPI.mySwear={customUrl:"",backupUrl:"",start:function(){if(FFAPI.variables){this.customUrl=FFAPI.variables.mySwearCustomImageUrl,this.backupUrl=FFAPI.variables.mySwearBackupImageUrl;for(var r=document.querySelectorAll("header #ff-drawer-bag .image-wrapper .imageRollover, .checkout-listItems-productDetails-image img, .account-modal_items img"),e=0,a=r.length;e<a;e++)this.bindCheck.call(this,r[e])}},bindCheck:function(r){-1<r.src.search(this.customUrl)&&this.checkImg(r,r.src)},checkImg:function(a,r){var e=new Image;e.onerror=function(){var r=function(r){var e=new Object;if(!r)return e;for(var a=r.split(/[;&]/),t=0;t<a.length;t++){var c=a[t].split("=");if(c&&2==c.length){var i=unescape(c[0]),s=unescape(c[1]);s=s.replace(/\+/g," "),e[i]=s}}return e}(a.src.replace(/^[^\?]+\??/,"")).width,e=this.backupUrl.replace("{0}",r);a.src=e}.bind(this),e.src=r}},FFAPI.mySwear.start();
var FFAPI=FFAPI||{};FFAPI.methods=FFAPI.methods||{},function(e){function f(e,t){if(e)return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)}).call(e,t)}function t(e,t){if(e)if(e instanceof NodeList)for(var n=0,i=e.length;n<i;n++)e[n].style.display=t;else e.style.display=t}e.delegate=function(e,t,n,i,o){if(e){t=t.split(" ");function r(n,i){return function(e){var t=e.target;do{if(f(t,n))return e.delegateTarget=t,void i.apply(this,arguments)}while(t=t.parentNode)}}if(e.addEventListener)for(var c=0,l=t.length;c<l;c++)e.addEventListener(t[c],r(n,i),o);else if(e.attachEvent)for(c=0,l=t.length;c<l;c++)e.attachEvent("on"+t[c],r(n,i),o)}},e.one=function(t,n,i,o){if(t){n=n.split(" ");function e(e){return e.target.removeEventListener(e.type,arguments.callee,o),i(e)}if(t.addEventListener)for(var r=0,c=n.length;r<c;r++)t.addEventListener(n[r],e,o);else if(t.attachEvent)for(r=0,c=n.length;r<c;r++)t.attachEvent("on"+n[r],function(e){t.detachEvent("on"+n[r],arguments.callee,o)},o)}},e.trigger=function(e,t){if(e){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)}},e.isVisible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},e.matches=function(e,t){return f(e,t)},e.show=function(e){t(e,"block")},e.hide=function(e){t(e,"none")},e.closest=function(e,t){if(e){for(;e.parentElement;){if(f(e,t))return e;e=e.parentElement}return null}},e.siblings=function(t,n){var e=function(e){return e!==t};return n&&(e=function(e){return e!==t&&f(e,n)}),[].filter.call(t.parentNode.children,e)},e.offset=function(e){if(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}},e.domReady=function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}}(FFAPI.methods);
define("requester",function(){function e(e){return new Promise(function(t,n){var o={method:"GET",data:null,dataType:"json",async:!0,serialized:!1};if(FFAPI.methods.extend(o,e),o.dataType=o.dataType.toLowerCase(),o.url){var r=new XMLHttpRequest;r.onload=function(){if(4===r.readyState)if(200<=r.status&&r.status<=400){var e=function(t,e){switch(e.dataType){case"html":return t;default:try{return JSON.parse(t)}catch(e){return t}}}(r.response,o);t(e)}else n(r)},r.onerror=function(){n("Error: "+r.status+" - "+r.statusText)},r.open(o.method,o.url,o.async),function(e,t){var n,o=t.data;o&&(t.serialized||"GET"!==t.method?t.serialized&&"GET"===t.method?t.url+="?"+o:n="object"==typeof o?JSON.stringify(o):o:(o=function(e){var t="";for(var n in e)"object"!=typeof e[n]?t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n]):"object"==typeof e[n]&&(t+=a(e,n));return t="?"+(t=t.slice(1,t.length))}(o),t.url+=o));e.open(t.method,t.url,t.async),function(e,t){switch(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.dataType){case"html":e.setRequestHeader("Content-type","application/x-www-form-urlencoded");break;default:e.setRequestHeader("Content-type","application/json")}t["If-Modified-Since"]&&e.setRequestHeader("If-Modified-Since",t["If-Modified-Since"])}(e,t),e.send(n)}(r,o)}else console.error("REQUESTER: url must be present on requested options.")});function a(e,t){if(null===e[t])return"&"+encodeURIComponent(t)+"=";var n=0,o=e[t].length,r="";if(!e[t].length)return r+"&"+t+"=";for(;n<o;n++)r+="&"+t+"="+e[t][n];return r}}return e.get=function(e,t){return this({url:e,method:"GET",data:t,dataType:"html"})},e.post=function(e,t){return this({url:e,method:"POST",data:t,dataType:"html"})},e.getJson=function(e,t){return this({url:e,method:"GET",data:t,dataType:"json"})},e.postJson=function(e,t){return this({url:e,method:"POST",data:t,dataType:"json"})},e});
var FFAPI=FFAPI||{};function initFormCheckboxes(e,t){var s=document.querySelectorAll("."+t),o=document.querySelector("."+e);FFAPI.methods.on(o,"change",function(){for(var e=0,t=s.length;e<t;e++)s[e].disabled=this.checked,s[e].checked=!this.checked},!1);for(var n=0,a=s.length;n<a;n++)FFAPI.methods.on(s[n],"change",function(){for(var e=!0,t=0,n=s.length;t<n;t++)s[t].checked&&(e=!1);if(o.checked=e)for(t=0,n=s.length;t<n;t++)s[t].disabled=e},!1);for(n=0,a=s.length;n<a;n++)s[n].disabled=o.checked}function toggleClassInternal(e,t){if(e instanceof NodeList)for(var n=0,s=e.length;n<s;n++)FFAPI.methods[FFAPI.methods.hasClass(e[n],t)?"removeClass":"addClass"](e[n],t);else FFAPI.methods[FFAPI.methods.hasClass(e,t)?"removeClass":"addClass"](e,t)}function bindShowAllEvent(){FFAPI.methods.delegate(document.getElementById("accordion-account"),"click",".toggle-results-button",function(e){var t=(e=e||window.event).delegateTarget||e.target||e.srcElement;FFAPI.methods.hasClass(t,"triggered")?(toggleClassInternal(document.querySelectorAll(".account-table tr:nth-child(n+6)"),"account-hidden-cell"),FFAPI.methods.removeClass(t,"triggered")):(toggleClassInternal(document.querySelectorAll(".account-hidden-cell"),"account-hidden-cell"),FFAPI.methods.trackingClickstream("259"),FFAPI.methods.addClass(t,"triggered")),e.preventDefault()})}function backToTop(){window.scrollTo({top:0,behavior:"smooth"})}FFAPI.address=FFAPI.address||{},FFAPI.address.methods=FFAPI.address.methods||{},FFAPI.address.variables=FFAPI.address.variables||{},FFAPI.account=FFAPI.account||{},FFAPI.account.methods=FFAPI.account.methods||{},FFAPI.account.variables=FFAPI.account.variables||{},FFAPI.account.methods.RedirectToLogin=function(){var e=FFAPI.variables.LoginRedirect+"?ru="+location.pathname;window.location.replace(e)},FFAPI.account.methods.handleUnauthorizedRequest=function(e){403==e&&FFAPI.account.methods.RedirectToLogin()},FFAPI.account.methods.SetPageSubType=function(e,t){universal_variable&&universal_variable.page&&(universal_variable.page.subType=t?e:void 0)},FFAPI.account.methods.TrackingClickStreamWithAccordionExpandedCollapsedState=function(e,t){t?FFAPI.methods.trackingClickstream('{ "tid": "'+e+'", "val": "expand" }'):FFAPI.methods.trackingClickstream('{ "tid": "'+e+'", "val": "collapse" }')},FFAPI.account.methods.OnAccordionInteraction=function(e,t){var n=!FFAPI.methods.hasClass(document.getElementById(e),"accordion-item active");FFAPI.account.methods.SetPageSubType(e,n),t&&FFAPI.account.methods.TrackingClickStreamWithAccordionExpandedCollapsedState(t,n)},$.ajaxSetup({error:function(e,t,n){FFAPI.account.methods.handleUnauthorizedRequest(e.status)}}),FFAPI.methods.trackingClickstream=function(e){"undefined"!=typeof _fftrkobj&&_fftrkobj.parse(e)},$("#js-account-details-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-details","260")}),$("#js-account-fflogin-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-fflogin")}),$("#js-account-addressbook-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-addressbook","261")}),$("#js-account-orders-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-orders","262")}),$("#js-account-referafriend-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-referafriend","264")}),$("#js-account-credits-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-credits","265")}),$("#js-account-commcentre-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-commcentre","422")}),$("#js-account-ffaccess-title").on("click",function(){FFAPI.account.methods.OnAccordionInteraction("account-ffaccess","589")}),FFAPI.account.commprefs={vars:{loaded:!1,instagramCommunicationOriginal:!1,commUserPreferencesToSend:{HasInstagramEnabled:!1,InstagramUsername:"",StyleUpdates:!1,StyleUpdatesSms:!1,ExclusiveInvitationsAndOffer:!1,ExclusiveInvitationsAndOfferSms:!1,EditorialRoundup:!1,EditorialRoundupSms:!1,FfAccess:!1,FfAccessSms:!1,UnsubscribeFromAll:!1,UnsubscribeFromAllSms:!1,HasWhatsAppSubscriptionForOrderUpdates:!1,HasRecentlyViewedEnabled:!1,HasRecommendationsEnabled:!1,HasPersonalRecommendations:!1,HasStylistEmailsEnabled:!1}},openAtLeastOneCommChannelModal:function(){if(void 0!==FFAPI.account.commprefs.modalTrigger)return document.body.style.top="-"+window.scrollY+"px",document.body.style.position="fixed",FFAPI.account.commprefs.modalTrigger.open();function t(){var e=document.body.style.top;document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),window.scrollTo(0,-1*parseInt(e||"0"))}require(["FFModal"],function(e){FFAPI.account.commprefs.modalTrigger=new e.FFModal({selector:"#atLeastOneModal",size:"md",onClose:t}),document.body.style.top="-"+window.scrollY+"px",document.body.style.position="fixed",FFAPI.account.commprefs.modalTrigger.open(),document.querySelector("#js-atLeastOneConfirm").addEventListener("click",FFAPI.account.commprefs.modalTrigger.close)})},openInstagramModal:function(){document.getElementById("commPreferencesForm");function n(e){var t=document.body.style.top;document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),window.scrollTo(0,-1*parseInt(t||"0"))}require(["FFModal"],function(e){var t=new e.FFModal({selector:".instagramFollowModal",size:"md",onClose:n});document.body.style.top="-"+window.scrollY+"px",document.body.style.position="fixed",t.open()})},binds:{init:function(){var e=document.querySelector("#account-commpreferences .accordion-title");FFAPI.methods.on(e,"click",function(e){if(!1===FFAPI.account.commprefs.vars.loaded){var t=document.getElementById("commPreferencesWrapper");$.ajax({url:universal_variable.page.subfolder+"/communicationpreferences/",type:"GET",dataType:"html",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Expires:0,"If-Modified-Since":"0"},success:function(e){t.innerHTML=e,FFAPI.account.commprefs.vars.loaded=!0,FFAPI.account.commprefs.binds.onCommPrefsLoad(),FFAPI.account.commprefs.binds.onCountryCodeLoad()}})}})},onCommPrefsLoad:function(){var e=document.getElementById("account-commpreferences"),t=document.getElementById("js-updatePreferences");FFAPI.methods.on(e,"change",function(){t.disabled&&(t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>')},!1),initFormCheckboxes("js-email-checkbox-master","js-email-checkbox-slave"),initFormCheckboxes("js-sms-checkbox-master","js-sms-checkbox-slave");var n=document.getElementsByClassName("js-instagram-checkbox-slave");if(0<n.length){FFAPI.methods.on(document.getElementById("usernameContainer"),"click",function(e){e.preventDefault(),e.stopPropagation()});var s=n[0],o=s.checked;(FFAPI.account.commprefs.vars.instagramCommunicationOriginal=o)&&FFAPI.account.commprefs.binds.showInstagramRO(),FFAPI.methods.on(s,"change",function(e){this.checked?(FFAPI.account.commprefs.binds.hideInstagramRO(),FFAPI.account.commprefs.binds.showInstagramEdit()):(FFAPI.account.commprefs.binds.hideInstagramRO(),FFAPI.account.commprefs.binds.hideInstagramEdit())},!1);var a=document.getElementById("editInstagramUsername");FFAPI.methods.on(a,"click",function(e){FFAPI.account.commprefs.binds.hideInstagramRO(),FFAPI.account.commprefs.binds.showInstagramEdit(),t.disabled&&(t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>')},!1)}FFAPI.account.commprefs.binds.initPhoneNumberCheckbox("wechat",t),FFAPI.account.commprefs.binds.initPhoneNumberCheckbox("line",t),FFAPI.account.commprefs.binds.initPhoneNumberCheckbox("whatsapp",t),FFAPI.account.commprefs.binds.initPhoneNumberCheckbox("allinonesms",t)},initPhoneNumberCheckbox:function(e,t){var n="js-pc-"+e+"-checkbox-slave",s=document.getElementsByClassName(n);if(0<s.length){var o=s[0],a=o.checked,r=document.getElementById("readOnly-"+e),c=document.getElementById("dialnumber-"+e);if(FFAPI.methods.on(r,"click",function(e){e.preventDefault(),e.stopPropagation()}),a){var i=r.querySelector("#phoneNumber-"+e).textContent.split("-")[0],d=c.querySelectorAll('li[data-country-code="'+i+'"]'),l=c.querySelector("#dropdown-"+e),u=document.createElement("span");u.classList.add("flags"),0<d.length&&(1===d.length&&(d[0].classList.forEach(function(e){r.querySelector(".flags").classList.add(e)}),d[0].classList.forEach(function(e){u.classList.add(e)})),l.textContent="",l.append(u),l.append(i)),r.classList.remove("hidden")}FFAPI.methods.on(o,"change",function(e){this.checked?(r.classList.add("hidden"),c.classList.remove("hidden")):(r.classList.add("hidden"),c.classList.add("hidden"))},!1);var m=r.querySelector(".edit");FFAPI.methods.on(m,"click",function(e){r.classList.add("hidden"),c.classList.remove("hidden"),t.disabled&&(t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>')},!1)}},showInstagramRO:function(){document.getElementById("usernameRO").classList.remove("hidden")},hideInstagramRO:function(){document.getElementById("usernameRO").classList.add("hidden")},showInstagramEdit:function(){document.getElementById("usernameEdit").classList.remove("hidden")},hideInstagramEdit:function(){document.getElementById("usernameEdit").classList.add("hidden")},onCountryCodeLoad:function(){var e=document.querySelectorAll(".countryCode_button"),t=document.querySelectorAll(".countryCode_elem_search"),n=document.querySelectorAll(".countryCode_wrapper_elem_list"),s=document.querySelectorAll(".countryCode_Phonenumber");function o(e){e.stopPropagation();var t=this.parentElement.querySelector(".countryCode_wrapper_elem_list");this.parentElement.querySelector(".countryCode_button").classList.add("isOpen"),t.classList.remove("hidden"),t.focus(),this.removeEventListener("click",o)}function a(e){if(e.stopPropagation(),!this.contains(e.relatedTarget)){this.classList.add("hidden");var t=this.parentElement.querySelector(".countryCode_button");t.classList.remove("isOpen"),setTimeout(function(){t.addEventListener("click",o)},500)}}function r(e){if(e.target.getAttribute("data-country-code")){var t=document.createElement("span"),n=this.parentElement.querySelector(".countryCode_button");this.setAttribute("aria-activedescendant",e.target.getAttribute("id")),e.target.classList.forEach(function(e){t.classList.add(e)}),n.textContent="",n.append(t),n.append(e.target.getAttribute("data-country-code")),this.blur()}e.preventDefault(),e.stopPropagation()}function c(){for(var e=this.value,t=this.parentElement.parentElement.querySelectorAll(".flags"),n=new RegExp(e.replace("+",""),"gi"),s=t.length-1;0<=s;s--)t[s].textContent.match(n)?t[s].classList.remove("hidden"):t[s].classList.add("hidden")}function i(){var e=this.parentElement.querySelector(".countryCode_elem_search");e.value="",e.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0}))}function d(e){return 8===e.keyCode||46===e.keyCode||!isNaN(Number(e.key))}function l(e,t,n){var s=/\+(\d+)-(\d+)/.exec(e);t.value=n?s[2]:s[1]}for(var u=e.length-1;0<=u;u--){FFAPI.methods.on(e[u],"click",o);var m=e[u].parentElement.parentElement.querySelector(".phoneNumber").textContent;0<m.length&&(l(m,e[u]),l(m,e[u].parentElement.querySelector(".countryCode_Phonenumber"),!0))}for(u=t.length-1;0<=u;u--)FFAPI.methods.on(t[u],"input",FFAPI.methods.debounce(c,500));for(u=n.length-1;0<=u;u--)FFAPI.methods.on(n[u],"click",r),FFAPI.methods.on(n[u],"blur",a,!0),FFAPI.methods.on(n[u].querySelector(".clear"),"click",i);for(u=s.length-1;0<=u;u--)s[u].onkeydown=d},changeToReadOnlyFields:function(e){var t=document.querySelector(".js-pc-"+e+"-checkbox-slave");if(null!=t&&t.checked){var n=document.getElementById("readOnly-"+e),s=document.getElementById("dialnumber-"+e),o=s.querySelector("#dropdown-"+e).innerText.trim(),a=s.querySelectorAll('li[data-country-code="'+o+'"]');n.querySelector(".flags").classList.value="flags",0<a.length&&1===a.length&&a[0].classList.forEach(function(e){n.querySelector(".flags").classList.add(e)});var r=s.querySelector("#phoneNumberInput-"+e).value;n.querySelector("#phoneNumber-"+e).innerText=o+"-"+r,n.classList.remove("hidden"),s.classList.add("hidden")}},validateAtLeastOneCommChannel:function(){var e=FFAPI.account.commprefs.vars.commUserPreferencesToSend;return[e.HasStylistEmailsEnabled,e.HasInstagramEnabled,e.HasLineEnabled,e.HasWeChatEnabled,e.HasWhatsAppEnabled].reduce(function(e,t){return e||t})}},ajax:{onSaveComplete:function(){var e=document.getElementById("js-updatePreferences");e.style.background="#ccc",e.innerHTML=e.getAttribute("data-success")+'<span class="glyphs icon-tickbox"></span>',e.disabled=!0,FFAPI.methods.trackingClickstream('{ "tid": "427", "val": "Preferences successfully saved" }');var t=document.getElementsByClassName("js-instagram-checkbox-slave");if(0<t.length){var n=t[0].checked;n&&(document.getElementById("instagramROUsername").innerText=document.getElementById("InstagramUsername").value,FFAPI.account.commprefs.binds.hideInstagramEdit(),FFAPI.account.commprefs.binds.showInstagramRO()),n&&!FFAPI.account.commprefs.vars.instagramCommunicationOriginal&&FFAPI.account.commprefs.openInstagramModal(),FFAPI.account.commprefs.vars.instagramCommunicationOriginal=n}FFAPI.account.commprefs.binds.changeToReadOnlyFields("wechat"),FFAPI.account.commprefs.binds.changeToReadOnlyFields("line"),FFAPI.account.commprefs.binds.changeToReadOnlyFields("whatsapp"),FFAPI.account.commprefs.binds.changeToReadOnlyFields("allinonesms")},validatePhoneInputsBeforeSubmit:function(e,t,n,s){var o=!1,a=document.querySelector(".js-pc-"+e+"-checkbox-slave");if(null!=a){var r=document.getElementById("dialnumber-"+e),c=r.querySelector("#phoneNumberInput-"+e);if(a.checked){t[n]=!0;var i=r.querySelector("#dropdown-"+e).innerText.trim(),d=c.value;i&&d?(t[s]=i+"-"+d,r.querySelector("#errorMessage-"+e).classList.add("hidden"),c.classList.remove("error")):(o=!0,r.querySelector("#errorMessage-"+e).classList.remove("hidden"),c.classList.add("error"))}else t[n]=!1,t[s]="",r.querySelector("#errorMessage-"+e).classList.add("hidden"),c.classList.remove("error")}else{var l=document.getElementById("pc-hiddenfields");t[n]="True"===l.querySelector("#hidden-"+e+"-enabled").value,t[s]=l.querySelector("#hidden-"+e+"-number").value}return o},savePreferences:function(e){var t=FFAPI.account.commprefs.vars.commUserPreferencesToSend,n=document.getElementsByClassName("js-instagram-checkbox-slave"),s=0<n.length,o=s&&n[0].checked,a=new RegExp(/^(?!.*\.\.)(?!.*\.$)[^\W][\w.]{0,29}$/),r=!1;if(s){var c=document.getElementById("InstagramUsername");if(o){var i=c.value;""===i?(document.getElementById("instagramUsernameError").classList.remove("hidden"),document.getElementById("instagramInvalidUsernameError").classList.add("hidden"),document.getElementById("InstagramUsername").classList.add("instagramPCCheckbox__input-error"),r=!0):a.test(i)?(document.getElementById("instagramUsernameError").classList.add("hidden"),document.getElementById("instagramInvalidUsernameError").classList.add("hidden"),document.getElementById("InstagramUsername").classList.remove("instagramPCCheckbox__input-error")):(document.getElementById("instagramUsernameError").classList.add("hidden"),document.getElementById("instagramInvalidUsernameError").classList.remove("hidden"),document.getElementById("InstagramUsername").classList.add("instagramPCCheckbox__input-error"),r=!0)}else c.value="",document.getElementById("instagramUsernameError").classList.add("hidden"),document.getElementById("instagramInvalidUsernameError").classList.add("hidden"),document.getElementById("InstagramUsername").classList.remove("instagramPCCheckbox__input-error")}if(null!==document.getElementById("pc-hiddenfields")&&(r=FFAPI.account.commprefs.ajax.validatePhoneInputsBeforeSubmit("wechat",t,"HasWeChatEnabled","WeChatNumber")||r,r=FFAPI.account.commprefs.ajax.validatePhoneInputsBeforeSubmit("line",t,"HasLineEnabled","LineNumber")||r,r=FFAPI.account.commprefs.ajax.validatePhoneInputsBeforeSubmit("whatsapp",t,"HasWhatsAppEnabled","WhatsAppNumber")||r,r=FFAPI.account.commprefs.ajax.validatePhoneInputsBeforeSubmit("allinonesms",t,"HasAllInOneSmsEnabled","SmsNumber")||r),!r){for(var d in t)if(e.elements.hasOwnProperty(d)){var l=e.elements[d].value;"checkbox"===e.elements[d].type&&(l=e.elements[d].checked),t[d]=l}return!1===FFAPI.account.commprefs.binds.validateAtLeastOneCommChannel()?FFAPI.account.commprefs.openAtLeastOneCommChannelModal():(FFAPI.account.commprefs.ajax.beforeBegin(),require(["requester"],function(e){e({url:universal_variable.page.subfolder+"/communicationpreferences/SaveUserPreferences",data:JSON.stringify(t),method:"POST"}).then(function(e){if(e.Success)FFAPI.account.commprefs.ajax.onSaveComplete();else{var t=document.getElementById("js-updatePreferences");t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>'}}).catch(function(e){console.error(e)})}),!1)}},onFailure:function(){FFAPI.methods.trackingClickstream('{ "tid": "427", "val": "Failed to save preferences." }')},beforeBegin:function(){var e=document.getElementById("js-updatePreferences");e.style.background="#ccc",e.innerHTML=e.getAttribute("data-loading")+'<span class="glyphs icon-loader"></span>',e.disabled=!0}}},FFAPI.account.communication={vars:{loaded:!1,favouriteDesigners:{men:[],women:[],kids:[]},favouriteCategories:{men:[],women:[],kids:[]},userPreferences:{men:{favouriteDesigners:[],favouriteCategories:[],genderId:"248"},women:{favouriteDesigners:[],favouriteCategories:[],genderId:"249"},kids:{favouriteDesigners:[],favouriteCategories:[],genderId:"19018"}},userPreferencesToSend:{CountryID:null,PreferredGender:null,StyleUpdates:!1,StyleUpdatesSms:!1,ExclusiveInvitationsAndOffer:!1,ExclusiveInvitationsAndOfferSms:!1,EditorialRoundup:!1,EditorialRoundupSms:!1,FFAccess:!1,FFAccessSms:!1,UnsubscribeFromAll:!1,UnsubscribeFromAllSms:!1,CultureCode:null,HasRecentlyViewedEnabled:!1,HasRecommendationsEnabled:!1,HasPersonalRecommendations:!1,HasWhatsAppSubscriptionForOrderUpdates:!1},ToggleUserPreferencesToSend:{CountryID:null,PreferredGender:null,CultureCode:null},currentgender:"women"},binds:{init:function(){var e=document.querySelector("#account-commcentre .accordion-title");FFAPI.methods.on(e,"click",function(e){if(!1===FFAPI.account.communication.vars.loaded){var t=document.getElementById("communicationCentreWrapper");$.ajax({url:universal_variable.page.subfolder+"/communicationcentre/",type:"GET",dataType:"html",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Expires:0,"If-Modified-Since":"0"},success:function(e){t.innerHTML=e,FFAPI.account.communication.vars.loaded=!0,FFAPI.account.communication.binds.onCentreLoad(),FFAPI.account.communication.binds.initGenderTabs()}})}})},onCentreLoad:function(){var e=document.getElementById("account-commcentre"),t=document.getElementById("js-updatePreferences");FFAPI.account.communication.shoppingPreferences.initAllFavouritesLists(),FFAPI.methods.on(e,"change",function(){t.disabled&&(t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>')},!1),initFormCheckboxes("js-email-checkbox-master","js-email-checkbox-slave"),initFormCheckboxes("js-sms-checkbox-master","js-sms-checkbox-slave"),FFAPI.account.communication.shoppingPreferences.initDropDowns()},initGenderTabs:function(){FFAPI.plugins.tabs.init();var e=document.getElementById("tabs"),t=FFAPI.plugins.tabs.get(e);FFAPI.variables.tabs.GenderPreferenceCentre=document.querySelector(".tabs-title-container"),FFAPI.variables.tabs.genreLine=document.querySelector(".js-genre-anime"),t.setCallback("show",function(e,t){FFAPI.account.communication.ajax.onGenderChanged(t)})}},ajax:{onSaveComplete:function(){var e=document.getElementById("js-updatePreferences");e.style.background="#ccc",e.innerHTML=e.getAttribute("data-success")+'<span class="glyphs icon-tickbox"></span>',e.disabled=!0,FFAPI.methods.trackingClickstream('{ "tid": "427", "val": "Preferences successfully saved" }')},savePreferences:function(e){var t="True"===document.querySelector("input[data-tstid='tstIsCommPrefEnabled']").getAttribute("value")?FFAPI.account.communication.vars.ToggleUserPreferencesToSend:FFAPI.account.communication.vars.userPreferencesToSend;for(var n in t)if(e.elements.hasOwnProperty(n)){if("PreferredGender"===n){for(var s=document.getElementsByName(n),o=0;o<s.length;o++)if(s[o].checked)var a=s[o].value}else if("checkbox"===e.elements[n].type)a=e.elements[n].checked;else a=e.elements[n].value;t[n]=a}var r=0;for(var c in t.UserPreferencesByGender=[],FFAPI.account.communication.vars.userPreferences)FFAPI.account.communication.ajax.removeZeros(c),t.UserPreferencesByGender[r]=FFAPI.account.communication.vars.userPreferences[c],r++;return FFAPI.account.communication.ajax.beforeBegin(),require(["requester"],function(e){document.getElementById("communicationCentreWrapper");e({url:universal_variable.page.subfolder+"/CommunicationCentre/SaveUserPreferences",data:JSON.stringify(t),method:"POST"}).then(function(e){if(e.Success)FFAPI.account.communication.ajax.onSaveComplete();else{var t=document.getElementById("js-updatePreferences");t.disabled=!1,t.style.background="#222",t.innerHTML=t.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>'}}).catch(function(e){console.error(e)})}),!1},removeZeros:function(e){var t=FFAPI.account.communication.vars.userPreferences[e].favouriteCategories.indexOf("0"),n=FFAPI.account.communication.vars.userPreferences[e].favouriteDesigners.indexOf("0");-1<t&&FFAPI.account.communication.vars.userPreferences[e].favouriteCategories.splice(t,1),-1<n&&FFAPI.account.communication.vars.userPreferences[e].favouriteDesigners.splice(n,1)},onFailure:function(){FFAPI.methods.trackingClickstream('{ "tid": "427", "val": "Failed to save preferences." }')},beforeBegin:function(){var e=document.getElementById("js-updatePreferences");e.style.background="#ccc",e.innerHTML=e.getAttribute("data-loading")+'<span class="glyphs icon-loader"></span>',e.disabled=!0},onGenderChanged:function(e){var n=e.el.getAttribute("data-gender");FFAPI.variables.animateRecommendationsLine(FFAPI.variables.tabs.genreLine,document.querySelector(".gender_"+n),200,FFAPI.variables.tabs.GenderPreferenceCentre);var s=document.getElementById("DesignersAndCategories"),o=document.getElementById("js-loading-mask");$.ajax({url:universal_variable.page.subfolder+"/communicationcentre/GenderChanged",type:"GET",dataType:"html",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Expires:0,"If-Modified-Since":"0"},data:{gender:n},beforeSend:function(){FFAPI.methods.removeClass(o,"hide")},success:function(e){s.innerHTML=e,FFAPI.account.communication.search.start(),FFAPI.account.communication.listcontrol.start(),FFAPI.account.communication.badges.start(),FFAPI.account.communication.shoppingPreferences.updateCurrentGender(n),FFAPI.account.communication.shoppingPreferences.initFavouritesLists(n),FFAPI.account.communication.shoppingPreferences.initBadges();var t=document.querySelector(".js-remove-all-designers");FFAPI.methods.on(t,"click",FFAPI.account.communication.shoppingPreferences.removeAllDesignerBadges,!1);t=document.querySelector(".js-remove-all-categories");FFAPI.methods.on(t,"click",FFAPI.account.communication.shoppingPreferences.removeAllCategoriesBadges,!1),FFAPI.methods.addClass(o,"hide")},error:function(e){}})}},shoppingPreferences:{initBadges:function(){FFAPI.account.communication.shoppingPreferences.initDesignerBadges(),FFAPI.account.communication.shoppingPreferences.initCategoriesBadges()},initDesignerBadges:function(){for(var e=[],t=0;t<FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners.length;t++){var n=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners[t],s=document.getElementById("d_"+n);s?s.click():(e.push(n),$(".js-comm-Designers-removed").removeClass("hide"))}for(var o=0;o<e.length;o++)FFAPI.account.communication.shoppingPreferences.syncDesigners(e[o],!1)},removeAllDesignerBadges:function(){loadingMask=document.getElementById("js-loading-mask"),FFAPI.methods.removeClass(loadingMask,"hide");for(var e=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners.length,t=JSON.parse(JSON.stringify(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners)),n=0;n<e;n++){var s=t[n],o=document.getElementById("d_"+s);o&&o.click()}FFAPI.methods.addClass(loadingMask,"hide")},removeAllCategoriesBadges:function(){loadingMask=document.getElementById("js-loading-mask"),FFAPI.methods.removeClass(loadingMask,"hide");for(var e=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories.length,t=JSON.parse(JSON.stringify(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories)),n=0;n<e;n++){var s=t[n],o=document.getElementById("c_"+s);o&&o.click()}FFAPI.methods.addClass(loadingMask,"hide")},initCategoriesBadges:function(){for(var e=[],t=0;t<FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories.length;t++){var n=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories[t],s=document.getElementById("c_"+n);s?s.click():(e.push(n),$(".js-comm-Categories-removed").removeClass("hide"))}for(var o=0;o<e.length;o++)FFAPI.account.communication.shoppingPreferences.syncCategories(e[o],!1)},initFavouritesLists:function(e){var t=document.getElementById("FavouriteDesigners-"+e);t&&""!==t.value&&"0"!==t.value&&(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners=t.value.split(","));var n=document.getElementById("FavouriteCategories-"+e);n&&""!==n.value&&"0"!==n.value&&(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories=n.value.split(","))},initAllFavouritesLists:function(){for(var e in FFAPI.account.communication.vars.userPreferences){var t=document.getElementById("FavouriteDesigners-"+FFAPI.account.communication.vars.userPreferences[e].genderId);t&&""!==t.value&&"0"!==t.value&&(FFAPI.account.communication.vars.userPreferences[e].favouriteDesigners=t.value.split(","));var n=document.getElementById("FavouriteCategories-"+FFAPI.account.communication.vars.userPreferences[e].genderId);n&&""!==n.value&&"0"!==n.value&&(FFAPI.account.communication.vars.userPreferences[e].favouriteCategories=n.value.split(","))}},initDropDowns:function(){"function"!=typeof $("#communicationCentreWrapper .selectForm").chosen?require(["forms_validations"],function(){FFAPI.account.communication.shoppingPreferences.fillPreferenceCenterDropDown()}):FFAPI.account.communication.shoppingPreferences.fillPreferenceCenterDropDown()},fillPreferenceCenterDropDown:function(){$("#communicationCentreWrapper .selectForm").chosen();var e=$("#countryList"),t=($("#countryList_chosen"),$("#countryEmailLang_chosen")),n=$("#CountryID");e.on("change",function(){n.val(e.val()),FFAPI.account.communication.shoppingPreferences.setCTAStatus()}),t.off("click").on("click",function(){FFAPI.account.communication.shoppingPreferences.setCTAStatus()})},getGenderSelectedFromRadios:function(){for(var e=document.getElementsByClassName("cc-genderRadio"),t=0,n=0;n<e.length;n++)if(e[n].checked)return void(t=e[n].getAttribute("data-genderId"));return t},syncPreferences:function(e,t){var n=e[0],s=e.slice(2);switch(n){case"d":this.syncDesigners(s,t);break;case"c":this.syncCategories(s,t)}},syncList:function(e,t,n){for(var s=-1,o=e.length,a=0;a<o&&-1==s;a++)e[a]==t&&(s=a);n?-1==s&&e.push(t):-1<s&&e.splice(s,1)},syncDesigners:function(e,t){this.syncList(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners,e,t);document.querySelector(".tabs-title[data-active='true']").getAttribute("data-gender");document.querySelector(".tabs-title.active")&&document.getElementById("FavouriteDesigners-"+FFAPI.account.communication.vars.currentgenderid)&&(document.getElementById("FavouriteDesigners-"+FFAPI.account.communication.vars.currentgenderid).value=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteDesigners.join(","))},syncCategories:function(e,t){this.syncList(FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories,e,t);document.querySelector(".tabs-title[data-active='true']").getAttribute("data-gender");document.querySelector(".tabs-title.active")&&document.getElementById("FavouriteCategories-"+FFAPI.account.communication.vars.currentgenderid)&&(document.getElementById("FavouriteCategories-"+FFAPI.account.communication.vars.currentgenderid).value=FFAPI.account.communication.vars.userPreferences[FFAPI.account.communication.vars.currentgender].favouriteCategories.join(","))},updateCurrentGender:function(e){switch(e||FFAPI.account.communication.shoppingPreferences.getGenderSelectedFromRadios()){case"248":FFAPI.account.communication.vars.currentgender="men",FFAPI.account.communication.vars.currentgenderid=248;break;case"19018":FFAPI.account.communication.vars.currentgender="kids",FFAPI.account.communication.vars.currentgenderid=19018;break;default:FFAPI.account.communication.vars.currentgender="women",FFAPI.account.communication.vars.currentgenderid=249}},setCTAStatus:function(){var e=document.getElementById("js-updatePreferences");e.disabled&&(e.disabled=!1,e.style.background="#222",e.innerHTML=e.getAttribute("data-initial")+'<span class="glyphs icon-thinArrow"></span>')}},listcontrol:{masterSelector:".js-listcontrol-master",masterList:[],slaveSelector:".js-listcontrol-slave",slaveList:[],start:function(){for(var e=document.querySelectorAll(this.masterSelector),t=document.querySelectorAll(this.slaveSelector),n=0;n<t.length;n++)this.slaveList.push(s);for(n=0;n<e.length;n++){var s=new this.ListControl(e[n]);this.masterList.push(s)}},ListControl:function(){function e(e){this.typeList=e.getAttribute("data-selectid").split(" "),this.masterList=e,this.slaveList=[];for(var t=0,n=this.typeList.length;t<n;t++)slaveList=document.querySelectorAll(".js-listcontrol-slave[data-selectid~="+this.typeList[t]+"]"),this.slaveList=this.slaveList.concat(Array.prototype.slice.call(slaveList));for(t=0,n=this.slaveList.length;t<n;t++)this.slaveList[t]==e&&(this.slaveList.splice(t,1),n--,t--);return this.slaveOptions=[],this.processListOptions(),this.bindEvents(),this}return e.prototype={processListOptions:function(){this.options=this.masterList.getElementsByTagName("li");for(var e=0,t=this.slaveList.length;e<t;e++)this.slaveOptions=this.slaveOptions.concat(Array.prototype.slice.call(this.slaveList[e].getElementsByTagName("li")))},bindEvents:function(){for(var e=0,t=this.options.length;e<t;e++)FFAPI.methods.on(this.options[e],"click",this.filter.bind(this)),FFAPI.methods.hasClass(this.options[e],"selected")&&(this.selectedItem=this.options[e])},filter:function(e){for(var t=e.target||e.srcElement,n=t.getAttribute("data-listmaster").toLowerCase(),s=0,o=this.slaveOptions.length;s<o;s++){var a=(this.slaveOptions[s].getAttribute("data-listslave")||"").toLowerCase();if(a&&"123"!=n&&0<=a.indexOf(n)||a&&"123"==n&&!a.match(/[a-z]/i)){list=this.slaveOptions[s].parentElement;var r=this.slaveOptions[s].offsetTop;list.scrollTop=r-list.offsetTop;break}}this.switchSelected(t)},switchSelected:function(e){FFAPI.methods.removeClass(this.selectedItem,"selected"),FFAPI.methods.addClass(e,"selected"),this.selectedItem=e}},e}()},search:{selector:".js-sc",list:[],start:function(){for(var e=document.querySelectorAll(this.selector),t=0;t<e.length;t++){var n=new this.Search(e[t]);this.list.push(n)}},Search:function(){function e(e){return this.container=e,this.optionSelector=".js-sc-option",this.input=this.container.querySelector(".js-sc-input"),this.list=this.container.querySelector(".js-sc-list"),this.options=[],this.optionsLength=0,this.noResults=this.list.querySelector(".js-sc-noresults"),this.filterTimeout=200,this.processOptions(),this.bindEvents(),this}return e.prototype={bindEvents:function(){FFAPI.methods.on(this.input,"keyup",this.delayFilter.bind(this))},filter:function(e){var t=this.input.value.toLowerCase(),n=0,s=this.list.getAttribute("data-selectid"),o=document.querySelector(".js-comm-"+s+"-list"),a=document.querySelector(".js-ruler-"+s+"-list");if(0<t.length){for(var r=0;r<this.optionsLength;r++)-1<this.options[r].name.indexOf(t)?FFAPI.methods.removeClass(this.options[r].el,"hide"):(FFAPI.methods.addClass(this.options[r].el,"hide"),n++);FFAPI.methods.addClass(o,"hide"),FFAPI.methods.addClass(a,"hide"),FFAPI.methods.removeClass(this.list,"hide"),FFAPI.methods[this.optionsLength===n?"removeClass":"addClass"](this.noResults,"hide")}else FFAPI.methods.removeClass(o,"hide"),FFAPI.methods.removeClass(a,"hide"),FFAPI.methods.addClass(this.list,"hide")},delayFilter:function(e){this.delayFilter.timeout&&clearTimeout(this.delayFilter.timeout),this.delayFilter.timeout=setTimeout(this.filter.bind(this,e),this.filterTimeout)},processOptions:function(){var e=this.list.querySelectorAll(this.optionSelector);this.optionsLength=e.length;for(var t=0;t<this.optionsLength;t++)this.options.push({el:e[t],name:e[t].getAttribute("data-name").toLowerCase()})}},e}()},badges:{start:function(){for(var e=document.querySelectorAll(".js-warning-icon"),t=0,n=e.length;t<n;t++)FFAPI.methods.on(e[t],"click",function(){FFAPI.methods.addClass(this.parentNode.parentNode,"hide")},!1);var s=document.querySelectorAll(".checkbox-filter");for(t=0,n=s.length;t<n;t++)FFAPI.methods.on(s[t],"change",FFAPI.account.communication.badges.checkboxHandler,!1)},createBadge:function(e,t,n){var s=FFAPI.responsive.goneBigQuerie.matches?"mr20 mb20":"mr10 mb10";return(spanText=document.createElement("span")).innerHTML=t,spanText.dir="ltr",(spanGlyph=document.createElement("span")).className="glyphs icon-close badge-icon",(newBadge=document.createElement("div")).className="float-left "+s,newBadge.innerHTML='<div class="button-grey-squareCorners"></div>',-1<sectionItem.indexOf("Categories")||-1<sectionItem.indexOf("Sizes")?((spanParentText=document.createElement("span")).innerHTML=n,(spanParent=document.createElement("span")).className="glyphs icon-next",(spanChildText=document.createElement("span")).innerHTML=t,newBadge.children[0].appendChild(spanParentText),newBadge.children[0].appendChild(spanParent),newBadge.children[0].appendChild(spanChildText)):newBadge.children[0].appendChild(spanText),newBadge.children[0].appendChild(spanGlyph),newBadge.setAttribute("id",e+"-badge"),newBadge},checkboxSync:function(e,t,n){var s=document.getElementById(e);e[0];s&&(s.checked=t),(s=document.getElementById("search-"+e))&&(s.checked=t),FFAPI.account.communication.shoppingPreferences.syncPreferences(e,t)},badgeHandler:function(){thisBadge=this.parentNode.parentNode,itemID=thisBadge.id.replace("-badge",""),FFAPI.account.communication.badges.checkboxSync(itemID,!1,!0),thisBadge.parentNode.removeChild(thisBadge),--numItems==maxItems-1&&FFAPI.methods.addClass(reachMax,"hide");var e=document.getElementById("account-commcentre"),t=new Event("change");e.dispatchEvent(t)},checkboxHandler:function(){itemID=this.id.replace("search-",""),sectionItem=this.getAttribute("data-filtername"),numItems=(badgeSection=document.querySelector("."+sectionItem+"-badge")).children.length,maxItems=document.querySelector("."+sectionItem+"-list").getAttribute("data-max"),reachMax=document.getElementById(sectionItem+"-max");var e=this.parentElement.parentElement.getAttribute("data-selectid"),t=document.querySelector(".js-comm-"+e+"-removed");this.checked?numItems<maxItems||-1==maxItems?(newBadge=FFAPI.account.communication.badges.createBadge(itemID,this.getAttribute("data-text"),this.getAttribute("data-parenttext")),badgeSection.appendChild(newBadge),FFAPI.methods.on(newBadge.querySelector(".badge-icon"),"click",FFAPI.account.communication.badges.badgeHandler,!1)):(FFAPI.methods.removeClass(reachMax,"hide"),FFAPI.methods.addClass(t,"hide"),this.checked=!1,FFAPI.plugins.scroll.to(reachMax,-30)):(badgeSection.removeChild(document.getElementById(itemID+"-badge")),FFAPI.methods.addClass(reachMax,"hide")),FFAPI.account.communication.badges.checkboxSync(itemID,this.checked,!1)}}},FFAPI.methods.ready(function(){bindShowAllEvent();var s=FFAPI.plugins.accordion.get(document.getElementById("accordion-account"));function e(e){if(s){var t="account-"+e,n=document.getElementById(t);FFAPI.account.methods.SetPageSubType(t,!0),$(n).find(".accordion-title").click(),FFAPI.plugins.scroll.to(n,0)}}FFAPI.account.communication.binds.init(),FFAPI.account.commprefs.binds.init(),window.onhashchange=function(){e(FFAPI.methods.urlHash())};var t=FFAPI.methods.urlHash()||function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("h");t&&e(t),$("a > button").on("click",function(){location.href=$(this).closest("a").attr("href")});var n=$(".returns-steps"),o=$(".returns-steps-address .arrow_right"),a=$(".returns-steps-date");$(".account-returns-type-option-InStore input:radio").on("change",function(){$("#Steps").val();n.addClass("returns-steps_inStore"),a.addClass("hide"),n.not(a).removeClass("col4").addClass("col6"),returns_steps_second.removeClass("hide"),o.addClass("hide"),return_step_one_arrow.removeClass("hide"),$(".js-summary-returnType-inStore").removeClass("hide"),$(".account-steps-container-ups .returns-steps-address").removeClass("hide"),$(".js-summary-returnType-byCourier").addClass("hide"),0<$(".js-summary-returnType-byUps").length&&($(".js-summary-returnType-byUps").addClass("hide"),$(".returns-steps-items").find(".arrow_right").removeClass("hide"),$(".js-returns-Ups-btn").addClass("hide"),$(".js-returns-InStore-btn").removeClass("hide"))}),$(".account-returns-type-option-courier input:radio").on("change",function(){var e=$("#Steps").val();if(n.removeClass("returns-steps_inStore"),e<=1&&(returns_steps_second.addClass("hide"),return_step_one_arrow.addClass("hide")),$(".js-summary-returnType-inStore").addClass("hide"),$(".js-summary-returnType-byCourier").removeClass("hide"),$(".account-steps-container-ups .returns-steps-address").addClass("hide"),0<$(".js-summary-returnType-byUps").length&&($(".js-summary-returnType-byCourier").addClass("hide"),$(".js-summary-returnType-byUps").removeClass("hide"),$(".returns-steps-items").find(".arrow_right").addClass("hide"),$(".js-returns-InStore-btn").addClass("hide"),$(".js-returns-Ups-btn").removeClass("hide"),$(".js-returns-InStore-btn").addClass("hide")),1<e)setTimeout(function(){o.removeClass("hide"),n.not(a).removeClass("col6").addClass("col4"),a.removeClass("hide")},350)});$(".account-details");detailsEditLink=$(".account-details-editLink"),detailsCancelLink=$(".account-details-cancelFormLink"),detailsEditsForm=$(".account-details-edit"),refer=$(".account-refer>tbody>tr");var r=$("body");r.on("click","#OldReferFriend",function(e){$(".oldReferWrapper").slideToggle(),e.preventDefault()});var c=$(".js-sliderCarouselReturns");function i(e,t){e.slice(e.length-(e.length-t),e.length).hide()}FFAPI.responsive.mediaQuerieXS.matches&&c.bxSlider({minSlides:1,controls:!1}),r.on("click","#account-referafriend .account-showAll",function(e){$(this).hasClass("triggered")?(i(refer,4),$(this).removeClass("triggered")):(refer.show(),$(this).addClass("triggered")),e.preventDefault()}),i(refer,5),document.querySelector(".accountBackToTop").addEventListener("click",backToTop)});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.details=function(){"use strict";var t=document.getElementById("account-details").querySelector(".accordion-title");function e(){"details"==(FFAPI.methods.urlHash()||function(t){for(var e=window.location.search.substr(1).split("&"),i=0;i<e.length;++i){var n=e[i].split("=");if(n[0]==t)return n[1]}return""}("h"))&&FFAPI.methods.trigger(t,"click")}return{init:function(){FFAPI.methods.one(t,"click",function(t){sliceLoader.loadAsync(window.universal_variable.page.subfolder+"/ajax/userdetails","portal_slice_user_details")}),e()}}}(),FFAPI.methods.domReady(function(){FFAPI.account.details.init()});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.addressBook=function(){"use strict";var o=document.getElementById("account-addressbook").querySelector(".accordion-title");function e(){return"addressbook"===(FFAPI.methods.urlHash()||function(o){return new URLSearchParams(window.location.search).get(o)||""}("h"))}return{init:function(){FFAPI.methods.one(o,"click",function(){sliceLoader.loadAsync(window.universal_variable.page.subfolder+"/addressbook/","portal_slices_address_book")}),e()&&FFAPI.methods.trigger(o,"click")}}}(),FFAPI.methods.domReady(function(){FFAPI.account.addressBook.init()});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.ffAccess=function(){"use strict";var t=document.getElementById("account-ffaccess");function c(){if("ffaccess"==function(c){for(var t=window.location.search.substr(1).split("&"),e=0;e<t.length;++e){var n=t[e].split("=");if(n[0]==c)return n[1]}return""}("h")){var c=t.querySelector(".accordion-title");FFAPI.methods.trigger(c,"click")}}return{init:function(){t&&(function(){var c=t.querySelector(".accordion-title");FFAPI.methods.one(c,"click",function(){sliceLoader.loadAsync(window.universal_variable.page.subfolder+"/ffaccess/","portal_slices_ff_access")})}(),c())}}}(),FFAPI.methods.domReady(function(){FFAPI.account.ffAccess.init()});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.orders=function(){"use strict";var o=document.getElementById("account-orders");function t(){FFAPI.methods.one(o.querySelector(".accordion-title"),"click",function(t){sliceLoader.loadAsync("/orders/","slice_myaccount_orders")})}function r(){var t=(FFAPI.methods.urlHash()||"").toLowerCase(),r=(function(t){for(var r=window.location.search.substr(1).split("&"),o=0;o<r.length;++o){var e=r[o].split("=");if(e[0]==t)return e[1]}return""}("h")||"").toLowerCase();(t.startsWith("order")||t.startsWith("return")||r.startsWith("order")||r.startsWith("return"))&&FFAPI.methods.trigger(o.querySelector(".accordion-title"),"click")}return{init:function(){t(),r()}}}(),FFAPI.methods.domReady(function(){FFAPI.account.orders.init()});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.credits=function(){"use strict";var t=document.getElementById("account-credits");function e(){FFAPI.methods.one(t.querySelector(".accordion-title"),"click",function(t){$.ajax({cache:!1,dataType:"html",type:"GET",contentType:"application/json; charset=utf-8",url:window.universal_variable.page.subfolder+"/ajax/credits"}).done(function(t){document.getElementById("creditWrapper").innerHTML=t})})}return{init:function(){e()}}}(),FFAPI.methods.domReady(function(){FFAPI.account.credits.init()});
var FFAPI=FFAPI||{};FFAPI.account=FFAPI.account||{},FFAPI.account.loginAndSecurity=function(){"use strict";var n=document.getElementById("account-fflogin");function t(){FFAPI.methods.one(n.querySelector(".accordion-title"),"click",function(n){sliceLoader.loadAsync(window.universal_variable.page.subfolder+"/loginandsecurity/","fflogin")})}function o(){"fflogin"==(FFAPI.methods.urlHash()||function(n){for(var t=window.location.search.substr(1).split("&"),o=0;o<t.length;++o){var i=t[o].split("=");if(i[0]==n)return i[1]}return""}("h"))&&FFAPI.methods.trigger(n.querySelector(".accordion-title"),"click")}return{init:function(){t(),o()}}}(),FFAPI.methods.domReady(function(){FFAPI.account.loginAndSecurity.init()});
var FFAPI=FFAPI||{};FFAPI.methods=FFAPI.methods||{},FFAPI.password=FFAPI.password||{},FFAPI.password.variables=FFAPI.password.variables||{},FFAPI.password.methods=FFAPI.password.methods||{};try{function _togglePassword(s){if(!s.keyCode||32===s.keyCode){s.preventDefault();var o=s.currentTarget,e=o.parentElement.getElementsByClassName(FFAPI.password.variables.jsSelector)[0];e&&("password"==e.type?e.type="text":e.type="password",o&&_toggleVisibilityIcon(o),e.focus())}}function _toggleVisibilityIcon(s){var o=s.className.split(" ");for(i=0,l=o.length;i<l;i++)o[i]===FFAPI.password.variables.showIconClass?o[i]=FFAPI.password.variables.hideIconClass:o[i]===FFAPI.password.variables.hideIconClass&&(o[i]=FFAPI.password.variables.showIconClass);s.className=o.join(" ")}function _bindEventHandlers(){for(i=0,l=FFAPI.password.variables.pwdVisibilityToggles.length;i<l;i++)FFAPI.methods.on(FFAPI.password.variables.pwdVisibilityToggles[i],"click",FFAPI.password.methods.togglePassword),FFAPI.methods.on(FFAPI.password.variables.pwdVisibilityToggles[i],"keydown",FFAPI.password.methods.togglePassword)}function _unbindEventHandlers(){for(i=0,l=FFAPI.password.variables.pwdVisibilityToggles.length;i<l;i++)FFAPI.methods.off(FFAPI.password.variables.pwdVisibilityToggles[i],"click",FFAPI.password.methods.togglePassword,!1),FFAPI.methods.off(FFAPI.password.variables.pwdVisibilityToggles[i],"keydown",FFAPI.password.methods.togglePassword,!1)}FFAPI.password.variables.jsSelector="js-input_password",FFAPI.password.variables.jsToggleSelector="js-password_visibility",FFAPI.password.variables.showIconClass="icon-show",FFAPI.password.variables.hideIconClass="icon-hide",FFAPI.password.variables.pwdVisibilityToggles=document.getElementsByClassName(FFAPI.password.variables.jsToggleSelector),FFAPI.password.methods.togglePassword=_togglePassword,FFAPI.methods.ready(_bindEventHandlers),$(document).unload(_unbindEventHandlers)}catch(s){try{window.debug}catch(s){}}